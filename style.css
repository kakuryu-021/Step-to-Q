/* =========================================
   ğŸ¨ ãƒ†ãƒ¼ãƒå¤‰æ•°å®šç¾© (Light & Dark)
   ========================================= */
:root {
    /* --- â˜€ï¸ ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ) --- */
    --bg-color: #f4f7f6;           /* å…¨ä½“ã®èƒŒæ™¯ */
    --card-bg: #ffffff;            /* ã‚«ãƒ¼ãƒ‰ãƒ»ã‚³ãƒ³ãƒ†ãƒŠèƒŒæ™¯ */
    --text-main: #2c3e50;          /* ãƒ¡ã‚¤ãƒ³æ–‡å­—è‰² */
    --text-sub: #555555;           /* ã‚µãƒ–æ–‡å­—è‰² */
    --text-muted: #7f8c8d;         /* è–„ã„æ–‡å­—è‰² */
    
    --primary: #2c3e50;            /* ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒ‰è‰² (æ¿ƒç´º) */
    --accent: #3498db;             /* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆè‰² (é’) */
    --correct: #27ae60;            /* æ­£è§£ (ç·‘) */
    --wrong: #e74c3c;              /* ä¸æ­£è§£ (èµ¤) */
    
    --border-color: #bdc3c7;       /* æ¿ƒã„å¢ƒç•Œç·š */
    --border-light: #eeeeee;       /* è–„ã„å¢ƒç•Œç·š */
    --shadow: rgba(0,0,0,0.1);     /* å½±ã®è‰² */
    
    --column-bg: #e8f6f3;          /* ã‚³ãƒ©ãƒ èƒŒæ™¯ */
    --explain-bg: #fdedec;         /* è§£èª¬èƒŒæ™¯ */
    --hover-bg: #ecf0f1;           /* ãƒ›ãƒãƒ¼æ™‚ã®èƒŒæ™¯ */
    --input-bg: #ffffff;           /* å…¥åŠ›ã‚¨ãƒªã‚¢èƒŒæ™¯ */
    
    /* ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ— */
    --heatmap-0: #ebedf0;
    --heatmap-1: #9be9a8;
    --heatmap-2: #40c463;
    --heatmap-3: #216e39;

    /* ãƒ­ãƒƒã‚¯ç”»é¢ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ (ç™½ã£ã½ã) */
    --overlay-bg: rgba(255, 255, 255, 0.85);
    --lock-msg-bg: #ffffff;
}

[data-theme="dark"] {
    /* --- ğŸŒ™ ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ --- */
    --bg-color: #121212;
    --card-bg: #1e1e1e;
    --text-main: #e0e0e0;
    --text-sub: #b0b0b0;
    --text-muted: #888888;
    
    --primary: #8ab6d9;            /* æš—ã„èƒŒæ™¯ã§è¦‹ã‚„ã™ã„æ°´è‰²ã«å¤‰æ›´ */
    --accent: #3498db;             /* é’ã¯ãã®ã¾ã¾ */
    --correct: #2ecc71;            /* å°‘ã—æ˜ã‚‹ã„ç·‘ */
    --wrong: #e74c3c;              /* èµ¤ */
    
    --border-color: #444444;
    --border-light: #333333;
    --shadow: rgba(0,0,0,0.5);
    
    --column-bg: #1b3a2b;          /* æš—ã„ç·‘èƒŒæ™¯ */
    --explain-bg: #3c1f1f;         /* æš—ã„èµ¤èƒŒæ™¯ */
    --hover-bg: #2c2c2c;
    --input-bg: #2d2d2d;

    /* ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ— (æš—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³) */
    --heatmap-0: #2d333b;
    --heatmap-1: #0e4429;
    --heatmap-2: #006d32;
    --heatmap-3: #39d353;

    /* ãƒ­ãƒƒã‚¯ç”»é¢ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ (é»’ã£ã½ã) */
    --overlay-bg: rgba(0, 0, 0, 0.85);
    --lock-msg-bg: #2d2d2d;
}

/* =========================================
   åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ«
   ========================================= */

body {
    font-family: "Helvetica Neue", Arial, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-main);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    padding: 20px;
    transition: background-color 0.3s, color 0.3s;
}

.container {
    background: var(--card-bg);
    width: 100%;
    max-width: 80%;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 10px 25px var(--shadow);
    border: 1px solid var(--border-light);
}

.hidden { display: none !important; }

/* ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ */
#start-screen { text-align: center; }

.mode-select-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 30px;
}

.mode-btn {
    background: var(--card-bg);
    border: 2px solid var(--border-color);
    border-radius: 12px;
    padding: 30px 20px;
    font-size: 1.2rem;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    color: var(--text-main);
}

.mode-btn:hover {
    border-color: var(--accent);
    background: var(--hover-bg);
    transform: translateY(-2px);
}
.mode-btn .icon { font-size: 2rem; }

.progress {
    background: var(--accent);
    color: white;
    padding: 6px 16px;
    border-radius: 20px;
    font-weight: bold;
    font-size: 1rem;
    box-shadow: 0 3px 6px rgba(52, 152, 219, 0.3);
    letter-spacing: 1px;
}

/* ã‚¯ã‚¤ã‚ºç”»é¢ãƒ˜ãƒƒãƒ€ãƒ¼ */
.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid var(--border-light);
}

.home-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
    color: var(--text-sub);
    background: var(--card-bg);
    padding: 8px 16px;
    border-radius: 30px;
    font-size: 0.9rem;
    font-weight: bold;
    box-shadow: 0 2px 5px var(--shadow);
    border: 1px solid var(--border-light);
    transition: all 0.3s ease;
}

.home-link:hover {
    background: var(--primary);
    color: #fff; /* ã“ã“ã¯å›ºå®šã§ç™½ */
    transform: translateX(-3px);
    box-shadow: 0 4px 8px var(--shadow);
}

/* --- ğŸ“š ã‚³ãƒ¼ã‚¹é¸æŠã‚«ãƒ¼ãƒ‰ --- */
.course-section h2 {
    font-size: 1.2rem;
    margin-bottom: 15px;
    color: var(--text-main);
    display: flex;
    align-items: center;
    gap: 10px;
}

.course-card {
    display: flex;
    align-items: center;
    background: var(--card-bg);
    padding: 20px;
    border-radius: 16px;
    text-decoration: none;
    color: var(--text-main);
    position: relative;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    box-shadow: 0 10px 20px var(--shadow);
    border: 1px solid var(--border-light);
    margin-bottom: 20px;
}

.course-card:hover {
    transform: translateY(-5px) scale(1.01);
    box-shadow: 0 15px 30px rgba(52, 152, 219, 0.15);
    border-color: rgba(52, 152, 219, 0.3);
}

.course-icon-box {
    width: 50px;
    height: 50px;
    /* ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯å€‹åˆ¥ã«styleå±æ€§ã§æŒ‡å®šã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ãŒã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’ç”¨æ„ */
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 12px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    font-size: 1.2rem;
    margin-right: 15px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    flex-shrink: 0;
}

.course-info { flex: 1; }

.course-info h3 {
    margin: 0 0 5px 0;
    font-size: 1.1rem;
    color: var(--text-main);
}

.course-info p {
    margin: 0;
    font-size: 0.85rem;
    color: var(--text-muted);
}

.course-arrow {
    width: 30px;
    height: 30px;
    background: var(--border-light);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: var(--border-color);
    transition: all 0.3s ease;
}

.course-card:hover .course-arrow {
    background: var(--accent);
    color: white;
    transform: translateX(5px);
}

.mode-badge {
    background: var(--primary);
    color: #fff;
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.8rem;
}

/* å•é¡Œè¡¨ç¤ºã‚¨ãƒªã‚¢ */
.question-box {
    font-size: 1.1rem;
    margin-bottom: 25px;
    line-height: 1.6;
    color: var(--text-main);
}

.options-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

.option-btn {
    background: var(--card-bg);
    border: 2px solid var(--border-color);
    border-radius: 8px;
    padding: 15px;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s;
    text-align: left;
    color: var(--text-main);
}

.option-btn:hover:not(:disabled) {
    border-color: var(--accent);
    background: var(--hover-bg);
}
.option-btn:disabled { opacity: 0.7; cursor: not-allowed; }

/* --- MathLive å…¥åŠ›ã‚¨ãƒªã‚¢ --- */
.input-area { 
    text-align: center;
    width: 100%;
}

math-field {
    display: block;
    font-size: 2rem;
    padding: 20px;
    width: 100%;
    box-sizing: border-box;
    border: 2px solid var(--border-color);
    border-radius: 8px;
    
    /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ */
    background-color: var(--input-bg); 
    color: var(--text-main);
    
    min-height: 80px;
    margin-bottom: 20px;
    text-shadow: none;
}

math-field:focus-within {
    border-color: var(--accent);
    outline: none;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
}

.submit-btn {
    background: var(--primary);
    color: white; /* ãƒœã‚¿ãƒ³æ–‡å­—ã¯å¸¸ã«ç™½ãŒè¦‹ã‚„ã™ã„ */
    border: none;
    padding: 12px 40px;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
    margin-top: 10px;
}
.submit-btn:hover { opacity: 0.9; }

/* çµæœè¡¨ç¤º */
.result-area {
    margin-top: 25px;
    padding: 20px;
    border-radius: 10px;
    animation: fadeIn 0.5s ease;
    /* èƒŒæ™¯è‰²ã¯JSã§ã‚¯ãƒ©ã‚¹ä»˜ä¸æ™‚ã«é©ç”¨ã•ã‚Œã‚‹ãŒã€åŸºæœ¬æ–‡å­—è‰²ã‚’è¨­å®š */
    color: var(--text-main);
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.result-title {
    font-weight: bold;
    font-size: 1.2rem;
    margin-bottom: 10px;
}
.is-correct {
    background-color: var(--column-bg);
    border-left: 5px solid var(--correct);
    color: var(--text-main);
}
.is-correct .result-title { color: var(--correct); }

.is-wrong {
    background-color: var(--explain-bg);
    border-left: 5px solid var(--wrong);
    color: var(--text-main);
}
.is-wrong .result-title { color: var(--wrong); }

.column-badge {
    display: inline-block;
    background: var(--correct);
    color: white;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.8rem;
    margin-bottom: 10px;
}

.next-btn {
    width: 100%;
    margin-top: 20px;
    padding: 15px;
    background: var(--accent);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1.1rem;
    cursor: pointer;
    font-weight: bold;
}
.next-btn:hover { background: #2980b9; }

/* ã‚¹ãƒãƒ›å¯¾å¿œ */
@media (max-width: 480px) {
    .stats-grid-detailed { grid-template-columns: 1fr; }
    .options-grid { grid-template-columns: 1fr; }
}

/* ã‚«ãƒ†ã‚´ãƒªã‚¿ã‚° */
.category-tag {
    display: inline-block;
    background: var(--hover-bg);
    color: var(--text-muted);
    font-size: 0.8rem;
    padding: 2px 8px;
    border-radius: 4px;
    margin-bottom: 8px;
}

/* ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼šæ™‚é–“è¡¨ç¤º */
.time-stats {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
}
.time-box {
    flex: 1;
    background: #34495e; /* ã“ã“ã¯å›ºå®šè‰²ã§OK */
    color: #fff;
    padding: 15px;
    border-radius: 10px;
    text-align: center;
}
.time-box span { display: block; font-size: 0.8rem; opacity: 0.8; margin-bottom: 5px; }
.time-box strong { font-size: 1.4rem; }

/* ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼šè©³ç´°ã‚°ãƒªãƒƒãƒ‰ */
.stats-grid-detailed {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 20px;
}

.stat-card-text {
    display: flex;
    flex-direction: column;
    justify-content: center;
    background: var(--card-bg);
    padding: 15px;
    border-radius: 12px;
    border: 1px solid var(--border-light);
    color: var(--text-main);
}
.stat-card-text .row {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid var(--border-light);
    font-size: 0.95rem;
}
.stat-card-text .row:last-child { border-bottom: none; }
.stat-card-text .correct { color: var(--correct); }
.stat-card-text .wrong { color: var(--wrong); }

/* ã‚°ãƒ©ãƒ•ã‚³ãƒ³ãƒ†ãƒŠ */
.chart-mini-container { height: 120px; position: relative !important; width: 100% !important; overflow: hidden; }
.chart-bar-container { height: 250px; position: relative !important; width: 100% !important; overflow: hidden; }
canvas { display: block; width: 100% !important; height: 100% !important; }

.category-section {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid var(--border-light);
    margin-bottom: 30px;
}

.reset-link {
    background: none;
    border: none;
    color: var(--text-muted);
    text-decoration: underline;
    cursor: pointer;
    font-size: 0.8rem;
    width: 100%;
    margin-top: 10px;
}

/* ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
.data-management-section {
    background: var(--card-bg);
    border-radius: 16px;
    padding: 25px;
    margin-top: 40px;
    box-shadow: 0 4px 15px var(--shadow);
    border: 1px solid var(--border-light);
}

.data-management-section h2 {
    font-size: 1.2rem;
    margin-bottom: 20px;
    color: var(--text-main);
    border-bottom: 2px solid var(--border-light);
    padding-bottom: 10px;
}

/* ã‚¿ãƒ–ãƒœã‚¿ãƒ³ */
.data-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.tab-btn {
    flex: 1;
    padding: 10px;
    border: none;
    background: var(--border-light); /* éã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚ */
    color: var(--text-muted);
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.2s;
}

.tab-btn.active {
    background: var(--primary);
    color: #fff; /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ–‡å­—ã¯ç™½å›ºå®š */
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

.tab-content {
    display: none;
    animation: fadeIn 0.3s;
}
.tab-content.active { display: block; }
.tab-desc { font-size: 0.9rem; color: var(--text-sub); margin-bottom: 15px; }

/* è»¢é€ã‚¨ãƒªã‚¢ */
.transfer-box {
    background: var(--hover-bg);
    padding: 15px;
    border-radius: 10px;
    border: 1px solid var(--border-light);
    margin-bottom: 20px;
}

.transfer-box h3 { margin: 0 0 10px 0; font-size: 1rem; color: var(--text-main); }

textarea {
    width: 100%;
    height: 80px;
    padding: 10px;
    border-radius: 6px;
    border: 1px solid var(--border-color);
    font-family: 'Roboto Mono', monospace;
    font-size: 0.85rem;
    margin-bottom: 10px;
    resize: none;
    background: var(--input-bg);
    color: var(--text-main);
}

.action-btn {
    background: var(--accent);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
}
.action-btn.secondary { background: #e67e22; }

.sub-btn {
    background: var(--primary);
    color: white;
    border: none;
    padding: 5px 15px;
    border-radius: 4px;
    font-size: 0.8rem;
    cursor: pointer;
}

/* ãƒªã‚»ãƒƒãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ */
.reset-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.reset-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    background: var(--card-bg);
    border: 1px solid var(--border-light);
    border-radius: 8px;
}

.reset-item span { font-weight: bold; color: var(--text-sub); }

.reset-btn {
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    color: white;
}
.reset-btn.warning { background: #f1c40f; color: #333; }
.reset-btn.danger { background: var(--wrong); }
.danger-border { border-color: #fab1a0; background: var(--explain-bg); }
.warning-text { color: #e67e22; font-size: 0.85rem; font-weight: bold; margin-bottom: 5px; }


/* --- ğŸ¨ ãƒ­ã‚´ãƒ»ã‚¢ã‚¤ã‚³ãƒ³ --- */

.logo-container {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 10px;
    justify-content: center;
}

.logo-box {
    width: 200px;
    height: 200px;
    background: var(--primary); 
    border-radius: 12px;
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    border: 1px solid rgba(255,255,255,0.1);
}

.logo-inner {
    width: 140px;
    height: 140px;
    border: 2px solid var(--accent);
    position: absolute;
    transform: rotate(45deg);
    opacity: 0.6;
}
.logo-inner::after {
    content: '';
    position: absolute;
    width: 100px;
    height: 100px;
    border: 1px solid rgba(255,255,255,0.3);
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
}

.logo-text {
    color: #fff;
    font-family: 'Roboto Mono', monospace;
    font-size: 96px;
    font-weight: bold;
    z-index: 2;
    text-shadow: 0 0 10px rgba(52, 152, 219, 0.8);
}

.site-name {
    font-family: 'Helvetica Neue', Arial, sans-serif;
    font-size: 22px;
    font-weight: 800;
    color: var(--text-main);
    letter-spacing: -0.5px;
}
.site-name .j2 {
    color: var(--accent);
    font-size: 26px;
    margin-left: 2px;
    font-style: italic;
}
.logo-box:hover .logo-inner {
    transform: rotate(225deg);
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}


/* --- ğŸ† ç§°å·ã‚¨ãƒªã‚¢ --- */
.user-profile-section {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 16px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 20px;
    box-shadow: 0 4px 15px var(--shadow);
    border: 1px solid var(--border-light);
}

.title-icon-box {
    width: 60px;
    height: 60px;
    background: var(--hover-bg);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2rem;
}

.title-info h3 { margin: 0; color: var(--text-muted); font-size: 0.9rem; font-weight: normal; }
.title-text { font-size: 1.4rem; font-weight: bold; color: var(--text-main); margin: 5px 0; }
.next-title { font-size: 0.8rem; color: var(--text-muted); }

/* --- ğŸ“… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ï¼‰ --- */
.heatmap-section {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 16px;
    margin-bottom: 20px;
    border: 1px solid var(--border-light);
}
.heatmap-section h3 { margin: 0 0 15px 0; font-size: 1rem; color: var(--text-sub); }

.heatmap-grid {
    display: grid;
    grid-template-columns: repeat(14, 1fr);
    gap: 5px;
}

.heatmap-cell {
    aspect-ratio: 1;
    border-radius: 4px;
    transition: all 0.2s;
}
.heatmap-cell:hover { transform: scale(1.2); border: 1px solid var(--border-color); }

/* ãƒ¬ãƒ™ãƒ«è‰²ã¯å¤‰æ•°åŒ– */
.level-0 { background-color: var(--heatmap-0); }
.level-1 { background-color: var(--heatmap-1); }
.level-2 { background-color: var(--heatmap-2); }
.level-3 { background-color: var(--heatmap-3); }


/* --- ğŸ“œ è¦ç´„ï¼†ãƒ­ãƒƒã‚¯æ©Ÿèƒ½ --- */
.terms-link-btn {
    display: inline-block;
    background: var(--card-bg);
    color: var(--text-sub);
    padding: 10px 20px;
    border-radius: 30px;
    text-decoration: none;
    font-weight: bold;
    border: 1px solid var(--border-color);
    box-shadow: 0 2px 5px var(--shadow);
    transition: all 0.3s;
}
.terms-link-btn:hover {
    background: var(--primary);
    color: #fff;
    border-color: var(--primary);
}

.terms-content {
    background: var(--bg-color); /* Slightly diff from card */
    padding: 20px;
    border-radius: 8px;
    border: 1px solid var(--border-light);
    height: 400px;
    overflow-y: scroll;
    margin-bottom: 20px;
    font-size: 0.9rem;
    color: var(--text-main);
}

.mini-quiz-item {
    background: var(--card-bg);
    padding: 15px;
    margin-bottom: 10px;
    border-radius: 8px;
    border: 1px solid var(--border-light);
    color: var(--text-main);
}
.mini-quiz-item p { margin: 0 0 10px 0; font-weight: bold; }
.mini-quiz-item label { margin-right: 15px; cursor: pointer; }

.agreement-box {
    text-align: center;
    padding: 20px;
    background: var(--column-bg);
    border-radius: 10px;
    margin-top: 20px;
    transition: all 0.3s;
    color: var(--text-main);
}
.agreement-box.disabled {
    opacity: 0.5;
    pointer-events: none;
    filter: grayscale(100%);
}

.checkbox-label {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    font-size: 1.1rem;
    cursor: pointer;
    margin-bottom: 15px;
}
.checkbox-label input { transform: scale(1.5); }

.course-section { position: relative; }

.lock-overlay {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: var(--overlay-bg); /* å¤‰æ•°åŒ–: ç™½/é»’ã®åŠé€æ˜ */
    backdrop-filter: blur(3px);
    z-index: 10;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 16px;
}

.lock-message {
    text-align: center;
    font-weight: bold;
    color: var(--text-sub);
    background: var(--lock-msg-bg);
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 5px 15px var(--shadow);
    border: 2px solid var(--border-light);
}

.terms-quiz-section {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 10px;
    border: 2px dashed var(--border-color);
    margin-top: 30px;
}
.terms-quiz-section h3 { margin-top: 0; color: var(--text-muted); }

/* --- ğŸŒ™ ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ --- */
.theme-toggle-btn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    background: var(--card-bg);
    border: 2px solid var(--border-color);
    border-radius: 50%;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: transform 0.2s;
    color: var(--text-main);
}
.theme-toggle-btn:hover { transform: scale(1.1); }

/* ==========================================
   ğŸ”” é€šçŸ¥ãƒœã‚¿ãƒ³ ï¼† ãƒ¢ãƒ¼ãƒ€ãƒ«
   ========================================== */

/* ãƒ†ãƒ¼ãƒãƒœã‚¿ãƒ³ã®å·¦ã«é…ç½® */
.notify-toggle-btn {
    position: fixed;
    bottom: 20px;
    right: 85px; /* ãƒ†ãƒ¼ãƒãƒœã‚¿ãƒ³(å³20px + å¹…50px + éš™é–“15px) */
    width: 50px;
    height: 50px;
    background: var(--card-bg);
    border: 2px solid var(--border-color);
    border-radius: 50%;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: transform 0.2s;
    color: var(--text-main);
}
.notify-toggle-btn:hover { transform: scale(1.1); }

/* èµ¤ã„é€šçŸ¥ãƒãƒƒã‚¸ */
.notify-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: var(--accent);
    color: white;
    font-size: 0.7rem;
    font-weight: bold;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    border: 2px solid var(--card-bg);
}

/* èƒŒæ™¯ã‚’æš—ãã™ã‚‹ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
.notify-overlay {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px); /* ã™ã‚Šã‚¬ãƒ©ã‚¹åŠ¹æœ */
    z-index: 2000;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}
.notify-overlay.active {
    opacity: 1;
    visibility: visible;
}

/* é€šçŸ¥ãƒœãƒƒã‚¯ã‚¹ã®ä¸­èº« */
.notify-content {
    background: var(--card-bg);
    width: 90%;
    max-width: 450px;
    border-radius: 16px;
    padding: 25px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    border: 1px solid var(--border-light);
    transform: translateY(20px);
    transition: transform 0.3s ease;
    color: var(--text-main);
}
.notify-overlay.active .notify-content {
    transform: translateY(0); /* ãµã‚“ã‚ã‚Šä¸‹ã‹ã‚‰æµ®ãä¸ŠãŒã‚‹ */
}

/* ãƒ˜ãƒƒãƒ€ãƒ¼ã¨é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ */
.notify-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid var(--border-light);
    padding-bottom: 15px;
    margin-bottom: 15px;
}
.notify-header h2 { margin: 0; font-size: 1.2rem; }
.notify-close-btn {
    background: none; border: none; font-size: 1.2rem;
    cursor: pointer; color: var(--text-muted); transition: color 0.2s;
}
.notify-close-btn:hover { color: var(--wrong); }

/* ãŠçŸ¥ã‚‰ã›ãƒªã‚¹ãƒˆ */
.notify-list { list-style: none; padding: 0; margin: 0; max-height: 500px; overflow-y: auto; }
.notify-list li {
    padding: 15px 0;
    border-bottom: 1px dashed var(--border-light);
}
.notify-list li:last-child { border-bottom: none; }
.notify-date {
    display: inline-block;
    font-size: 0.8rem;
    color: var(--text-muted);
    background: var(--hover-bg);
    padding: 2px 8px;
    border-radius: 4px;
    margin-bottom: 8px;
}
.notify-list p { margin: 0; font-size: 0.95rem; line-height: 1.5; }